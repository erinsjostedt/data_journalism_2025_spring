---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(dplyr)
library(tidyselect)
```

#loading data
```{r}
early_voting_turnout <- read.csv("data/early_voting.csv")
mail_in_ballots <- read.csv("data/mail_in_ballots.csv")
```

#cleaning datasets via coding to fix column names, then exporting the dataset to excel to add missing variables (county names)
```{r}
early_voting_turnout <- early_voting_turnout |>
  clean_names() |>
  mutate(across(starts_with("day"), ~gsub(",", "", .) %>% as.numeric)) |>
  mutate(across(starts_with("x_"), ~gsub("%", "", .))) |>
  rename(perc_day1 = x_day1,
         perc_day2 = x_day2,
         perc_day3 = x_day3,
         perc_day4 = x_day4,
         perc_day5 = x_day5,
         perc_day6 = x_day6,
         perc_day7 = x_day7,
         perc_day8 = x_day8,
         perc_total = x_total)
  
 
```

##oops more cleaning
```{r}

early_voting_turnout <- early_voting_turnout |>
  mutate(across(starts_with("perc_"), ~gsub("%", "", .))) |>
  mutate(across(starts_with("total"), ~gsub(",", "", .))) |>
  mutate(total = as.numeric(total)) |>
  mutate(eligible_actives = str_remove(eligible_actives, ",")) |>
  mutate(eligible_actives = as.numeric(eligible_actives))

```

```{r}

write_csv(early_voting_turnout, "data/early_voting.csv", col_names = TRUE)

```

##final clean data upload
```{r}

clean_early_voting_turnout <- read_csv("data/clean_early_voting.csv")

```


Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

**Week 2**
This dataset displays the amount of 

```{r}

glimpse(early_voting_turnout)

```

